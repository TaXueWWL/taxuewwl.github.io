
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>SpringBoot整合Dubbo实现RPC+SOA | 朝·闻·道</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="SnoWalker">
    

    <meta name="keywords" content="spring-boot">
    <meta name="description" content="本文主要讲解如何使用SpringBoot框架配合Spring-Boot-starter-dubbo实现hlRPC调用。Springboot框架大家基本都有所认知，在此就不多做讲述，文章开始简单介绍一下Dubbo框架。
Dubbo是阿里巴巴出品的一款分布式的SOA服务治理框架，致力于提供高性能和透明化的RPC(Remote Procedure Call Protocol)远程调用的解决方案，以及SO">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot整合Dubbo实现RPC+SOA">
<meta property="og:url" content="http://wuwenliang.net/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/index.html">
<meta property="og:site_name" content="朝·闻·道">
<meta property="og:description" content="本文主要讲解如何使用SpringBoot框架配合Spring-Boot-starter-dubbo实现hlRPC调用。Springboot框架大家基本都有所认知，在此就不多做讲述，文章开始简单介绍一下Dubbo框架。
Dubbo是阿里巴巴出品的一款分布式的SOA服务治理框架，致力于提供高性能和透明化的RPC(Remote Procedure Call Protocol)远程调用的解决方案，以及SO">
<meta property="og:image" content="http://wuwenliang.net/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/1.png">
<meta property="og:image" content="http://wuwenliang.net/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/2.png">
<meta property="og:image" content="http://wuwenliang.net/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/3.png">
<meta property="og:image" content="http://wuwenliang.net/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/4.png">
<meta property="og:image" content="http://wuwenliang.net/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/5.png">
<meta property="og:image" content="http://wuwenliang.net/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/6.png">
<meta property="og:image" content="http://wuwenliang.net/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/7.png">
<meta property="og:image" content="http://wuwenliang.net/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/8.png">
<meta property="og:image" content="http://wuwenliang.net/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/9.png">
<meta property="og:updated_time" content="2018-07-05T03:40:04.372Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SpringBoot整合Dubbo实现RPC+SOA">
<meta name="twitter:description" content="本文主要讲解如何使用SpringBoot框架配合Spring-Boot-starter-dubbo实现hlRPC调用。Springboot框架大家基本都有所认知，在此就不多做讲述，文章开始简单介绍一下Dubbo框架。
Dubbo是阿里巴巴出品的一款分布式的SOA服务治理框架，致力于提供高性能和透明化的RPC(Remote Procedure Call Protocol)远程调用的解决方案，以及SO">
<meta name="twitter:image" content="http://wuwenliang.net/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/1.png">

    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="朝·闻·道" title="朝·闻·道"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="朝·闻·道">朝·闻·道</a></h1>
				<h2 class="blog-motto">SnoWalker&#39;s Blog</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/index.html">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/old/index.html">旧版</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:wuwenliang.net">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/" title="SpringBoot整合Dubbo实现RPC+SOA" itemprop="url">SpringBoot整合Dubbo实现RPC+SOA</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SnoWalker" target="_blank" itemprop="author">SnoWalker</a>
		
  <p class="article-time">
    <time datetime="2017-09-30T03:39:33.000Z" itemprop="datePublished"> 发表于 2017-09-30</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#工程介绍"><span class="toc-number">1.</span> <span class="toc-text">工程介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#服务提供方wechat-service-consumer-dubbo"><span class="toc-number">1.1.</span> <span class="toc-text">服务提供方wechat-service-consumer-dubbo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Pom-xml"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. Pom.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-服务接口定义，可以单独发布到common包，并由服务提供方和调用方都依赖"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. 服务接口定义，可以单独发布到common包，并由服务提供方和调用方都依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-服务接口实现类，通过-Service注解配置其为dubbo服务"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. 服务接口实现类，通过@Service注解配置其为dubbo服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-配置文件"><span class="toc-number">1.1.4.</span> <span class="toc-text">4. 配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#服务消费方wechat-service-consumer-dubbo"><span class="toc-number">1.2.</span> <span class="toc-text">服务消费方wechat-service-consumer-dubbo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-pom-xml"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. pom.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-服务接口定义，同服务提供方"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 服务接口定义，同服务提供方</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-服务消费方配置"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 服务消费方配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-业务逻辑开发，可以是任意形式，这里用一个controller进行调用，其效果就如同进行本地的服务调用"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. 业务逻辑开发，可以是任意形式，这里用一个controller进行调用，其效果就如同进行本地的服务调用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-服务消费方的配置文件"><span class="toc-number">1.2.5.</span> <span class="toc-text">5. 服务消费方的配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#服务注册中心的搭建"><span class="toc-number">1.3.</span> <span class="toc-text">服务注册中心的搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#进行测试"><span class="toc-number">1.4.</span> <span class="toc-text">进行测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#附录：dubbo管控台的使用"><span class="toc-number">1.5.</span> <span class="toc-text">附录：dubbo管控台的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#注意"><span class="toc-number">1.6.</span> <span class="toc-text">注意</span></a></li></ol></li></ol>
		
		</div>
		
		<p>本文主要讲解如何使用SpringBoot框架配合Spring-Boot-starter-dubbo实现hlRPC调用。Springboot框架大家基本都有所认知，在此就不多做讲述，文章开始简单介绍一下Dubbo框架。</p>
<p>Dubbo是阿里巴巴出品的一款分布式的SOA服务治理框架，致力于提供高性能和透明化的RPC(Remote Procedure Call Protocol)远程调用的解决方案，以及SOA服务治理方案。</p>
<p>Dubbo框架基本的架构如下<br><img src="/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/1.png" alt="Dubbo框架基本的架构"></p>
<p>可见，其由四部分组成，分别是</p>
<pre><code>Registry： 注册中心
Consumer： 服务消费方
Provider： 服务提供方
Monitor： 服务监控方
</code></pre><p>其中前三者是必需提供的，在生产环境中，服务注册中心一般使用zookeeper。</p>
<p>更多的Dubbo框架的信息可以参考官方文档 <a href="https://dubbo.gitbooks.io/dubbo-user-book/" title="https://dubbo.gitbooks.io/dubbo-user-book/" target="_blank" rel="external">https://dubbo.gitbooks.io/dubbo-user-book/</a>，该框架在停滞一段时间之后又开始了更新，加上国内使用该框架的公司数目也很客观，因此不必担心社区的热度会下降。<br><a id="more"></a></p>
<h1 id="工程介绍"><a href="#工程介绍" class="headerlink" title="工程介绍"></a>工程介绍</h1><p>本文的业务基于之前的微信凭证查询业务进行，分为服务提供方和服务消费方两部分，基于springboot1.4.3。并在文章最后介绍一下利用Dubbo管控台进行服务的治理。</p>
<h2 id="服务提供方wechat-service-consumer-dubbo"><a href="#服务提供方wechat-service-consumer-dubbo" class="headerlink" title="服务提供方wechat-service-consumer-dubbo"></a>服务提供方wechat-service-consumer-dubbo</h2><p><img src="/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/2.png" alt="服务提供方程序结构图"></p>
<h3 id="1-Pom-xml"><a href="#1-Pom-xml" class="headerlink" title="1. Pom.xml"></a>1. Pom.xml</h3><p>主要引入spring-boot-dubbo-starter，实现的很巧妙只用了四个Java配置类就将Dubbo与springboot整合到一起。</p>
<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.hispeed.microservice&lt;/groupId&gt;
    &lt;artifactId&gt;wechat-pz-service-provider-dubbo&lt;/artifactId&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;

    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;1.4.3.RELEASE&lt;/version&gt;
    &lt;/parent&gt;

    &lt;properties&gt;
        &lt;dubbo-spring-boot&gt;1.0.0&lt;/dubbo-spring-boot&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
        &lt;java.version&gt;1.7&lt;/java.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;!-- wechat-pz-common-core --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.hispeed.microservice&lt;/groupId&gt;
            &lt;artifactId&gt;wechat-pz-common-core&lt;/artifactId&gt;
            &lt;version&gt;1.0.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!-- spring-boot-start-web --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- spring-boot-actuator --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- spring-cloud-sleuth-zipkin --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-sleuth-zipkin&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- spring-boot-starter-test --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;!-- spring-boot-devtools 
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;--&gt;
        &lt;!-- eureka-client --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- Mybatis --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;1.1.1&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!-- oracle-driver --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.oracle&lt;/groupId&gt;
            &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;
            &lt;version&gt;14.0.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!-- spring-boot-starter-dubbo --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;io.dubbo.springboot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-dubbo&lt;/artifactId&gt;
            &lt;version&gt;${dubbo-spring-boot}&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
                &lt;version&gt;Camden.SR4&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre><h3 id="2-服务接口定义，可以单独发布到common包，并由服务提供方和调用方都依赖"><a href="#2-服务接口定义，可以单独发布到common包，并由服务提供方和调用方都依赖" class="headerlink" title="2. 服务接口定义，可以单独发布到common包，并由服务提供方和调用方都依赖"></a>2. 服务接口定义，可以单独发布到common包，并由服务提供方和调用方都依赖</h3><p>定义如下</p>
<pre><code>public interface WeChatPzService {
    /**根据订单号和凭证类型微信凭证实体*/
    public List&lt;WeChatPzInfoVobj&gt; getPzInfoVobj(String order_id, String pz_type) throws NullPointerException;
    /**新增微信凭证实体*/
    public boolean insertPzInfo(WeChatPzInfoVobj weChatPzInfoVobj);
    /**检测是否重复插入/
    public boolean isPzInfoExist(String hf_id);
}
</code></pre><h3 id="3-服务接口实现类，通过-Service注解配置其为dubbo服务"><a href="#3-服务接口实现类，通过-Service注解配置其为dubbo服务" class="headerlink" title="3. 服务接口实现类，通过@Service注解配置其为dubbo服务"></a>3. 服务接口实现类，通过@Service注解配置其为dubbo服务</h3><pre><code>@Service(version = &quot;1.0.0&quot;)
public class WeChatPzServiceImpl implements WeChatPzService {       
    private static final Logger LOGGER = LoggerFactory.getLogger(WeChatPzServiceImpl.class);
    @Autowired
    private WeChatPzMapper weChatPzMapper;
    @Override
    public List&lt;WeChatPzInfoVobj&gt; getPzInfoVobj(String order_id, String pz_type) throws NullPointerException {
        LOGGER.info(&quot;业务层进行处理，将[查询参数]传递给服务持久层&quot;);
        List&lt;WeChatPzInfoVobj&gt; weChatPzInfoVobjs = this.weChatPzMapper.getPzInfoVobj(order_id, pz_type);
        if (weChatPzInfoVobjs.size() == 0 || weChatPzInfoVobjs == null) {
            LOGGER.info(&quot;业务层得到的查询实体信息为空&quot;);
        }
        LOGGER.info(&quot;业务层得到的查询实体信息为:List&lt;WeChatPzInfoVobj&gt;=&quot; + weChatPzInfoVobjs.toString());
        return weChatPzInfoVobjs;
    }
    @Override
    public boolean insertPzInfo(WeChatPzInfoVobj weChatPzInfoVobj) {
        LOGGER.info(&quot;业务层进行处理，将[插入数据 ]传递给服务持久层&quot;);
        int count = this.weChatPzMapper.insertPzInfo(weChatPzInfoVobj);
        if (count &gt; 0) {
            LOGGER.info(&quot;数据持久层处理完毕，hf_id=&quot; + weChatPzInfoVobj.getHfId() + &quot;添加成功&quot;);
            return true;
        }
        LOGGER.info(&quot;数据持久层处理完毕，hf_id=&quot; + weChatPzInfoVobj.getHfId() + &quot;添加失败&quot;);
        return false;
    }
    @Override
    public boolean isPzInfoExist(String hf_id) {
        WeChatPzInfoVobj weChatPzInfoVobj = this.weChatPzMapper.getWeChatPzByHfId(hf_id);
        // 通过话费流水号能够查到对应的条目，说明已经添加，返回true
        // 否则返回false
        if (weChatPzInfoVobj != null) {
            LOGGER.info(&quot;数据持久层处理完毕，hf_id=&quot; + weChatPzInfoVobj.getHfId() + &quot;的凭证信息存在，具体的信息为:&quot; + weChatPzInfoVobj.toString());
            return true;
        }
        return false;
    }
}
</code></pre><p>核心就是<strong>@Service</strong> 注解标识为 Dubbo 服务，并通过 version 指定了版本号。</p>
<p>com.hispeed.wechat.pz.mapper.WeChatPzMapper是通过mybatis的注解方式进行数据库的访问。具体的代码感兴趣可以自行查看。</p>
<h3 id="4-配置文件"><a href="#4-配置文件" class="headerlink" title="4. 配置文件"></a>4. 配置文件</h3><pre><code>server.port=8082
/#Dubbo
spring.dubbo.application.name=wechat_pz_service_provider_dubbo应用名称
spring.dubbo.registry.address=zookeeper://127.0.0.1:2181        注册中心地址
spring.dubbo.protocol.name=dubbo                          协议名称
spring.dubbo.protocol.port=20880                           协议端口
spring.dubbo.scan=com.hispeed.wechat.pz.service              服务类包目录
/#datasource
spring.datasource.driver-class-name=oracle.jdbc.driver.OracleDriver
spring.datasource.url=jdbc:oracle:thin:@192.168.63.90:1521:testdb
spring.datasource.username=esales26
spring.datasource.password=esales26
/#eureka-client
spring.application.name=wechat-pz-service-provider-dubbo
eureka.client.serviceUrl.defaultZone=http://192.168.66.40:8761/eureka
eureka.instance.prefer-ip-address=true
/#interface version
wechat.pz.inter.version=v1.0
</code></pre><p>这里就解释一个地方，<strong>spring.dubbo.scan</strong>表示要扫描作为服务的类路径，为了方便就将service包都扫描进去了。</p>
<h2 id="服务消费方wechat-service-consumer-dubbo"><a href="#服务消费方wechat-service-consumer-dubbo" class="headerlink" title="服务消费方wechat-service-consumer-dubbo"></a>服务消费方wechat-service-consumer-dubbo</h2><h3 id="1-pom-xml"><a href="#1-pom-xml" class="headerlink" title="1. pom.xml"></a>1. pom.xml</h3><p><img src="/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/3.png" alt="服务消费方程序结构图"></p>
<h3 id="2-服务接口定义，同服务提供方"><a href="#2-服务接口定义，同服务提供方" class="headerlink" title="2. 服务接口定义，同服务提供方"></a>2. 服务接口定义，同服务提供方</h3><p>为了避免将代码到处复制粘贴，引起代码的不一致，再次建议将公共代码封装为一个公共依赖。</p>
<h3 id="3-服务消费方配置"><a href="#3-服务消费方配置" class="headerlink" title="3. 服务消费方配置"></a>3. 服务消费方配置</h3><p>通过@Reference引用远程服务提供者，发起服务的调用</p>
<pre><code>@Component
public class WeChatPzDubboServiceImpl {

    @Reference(version = &quot;1.0.0&quot;)
    WeChatPzService weChatPzService;

    public List&lt;WeChatPzInfoVobj&gt; getPzInfoVobj(String order_id, String pz_type)
            throws NullPointerException {
        return weChatPzService.getPzInfoVobj(order_id, pz_type);
    }

    public boolean insertPzInfo(WeChatPzInfoVobj weChatPzInfoVobj) {
        return weChatPzService.insertPzInfo(weChatPzInfoVobj);
    }

    public boolean isPzInfoExist(String hf_id) {
        return weChatPzService.isPzInfoExist(hf_id);
    }

}
</code></pre><p>这里我们定义了一个service 用于调用远程的接口，通过@Reference(version = “1.0.0”) 引用远程服务。通过该注解，订阅该接口版本为 1.0.0 的 Dubbo 服务。</p>
<p>同时我们把WeChatPzDubboServiceImpl这个bean添加到spring的bean容器中，便于后续的调用。</p>
<h3 id="4-业务逻辑开发，可以是任意形式，这里用一个controller进行调用，其效果就如同进行本地的服务调用"><a href="#4-业务逻辑开发，可以是任意形式，这里用一个controller进行调用，其效果就如同进行本地的服务调用" class="headerlink" title="4. 业务逻辑开发，可以是任意形式，这里用一个controller进行调用，其效果就如同进行本地的服务调用"></a>4. 业务逻辑开发，可以是任意形式，这里用一个controller进行调用，其效果就如同进行本地的服务调用</h3><p>这里我就截取一部分代码，更详细的代码请参考wechat-pz-service-consumer-dubbo工程下的com.hispeed.wechat.pz.controller.WeChatDubboController类。<br>            @RestController<br>            public class WeChatDubboController {</p>
<pre><code>private static final Logger LOGGER = LoggerFactory.getLogger(WeChatDubboController.class);

@Autowired
WeChatPzDubboServiceImpl iWeChatPzService;    

@Value(&quot;${wechat.pz.inter.version}&quot;)
private String interVersion;                    // 接口版本号

private ResponseParam&lt;WeChatPzInfoVobj&gt; responseParam;    // 封装非正常情况返回信息     

/**
 * 根据查询条件或许微信凭证
 * @param &lt;T&gt;
 * @return ResponseParam
 */
@GetMapping(&quot;pzinfo/select&quot;)
public ResponseParam&lt;WeChatPzInfoVobj&gt; getDataByParams(
        @RequestParam(&quot;order_id&quot;) String order_id,
        @RequestParam(&quot;pz_type&quot;) String pz_type,
        @RequestParam(&quot;version&quot;) String version) {

    LOGGER.info(&quot;该接口版本号为:version=&quot; + interVersion);
    LOGGER.info(&quot;接收到的参数列表为:&quot; + &quot; order_id=&quot; + order_id + &quot;,pz_type=[&quot; + pz_type + &quot;],version=&quot; + version); 

    responseParam = new ResponseParam&lt;WeChatPzInfoVobj&gt;();

    // 请求参数不完整或存在空值
    if (StringUtils.isEmpty(order_id) || StringUtils.isEmpty(pz_type) || StringUtils.isEmpty(version)) {
        responseParam.setData(null);
        responseParam.setReturnCode(SelectCodeEnum.INVALID_PARAM.getCode());
        responseParam.setDetail(SelectCodeEnum.INVALID_PARAM.getDetail());
        return responseParam;
    }  
</code></pre><h3 id="5-服务消费方的配置文件"><a href="#5-服务消费方的配置文件" class="headerlink" title="5. 服务消费方的配置文件"></a>5. 服务消费方的配置文件</h3><pre><code>server.port=8083
/# name of consumer
spring.application.name=wechat-pz-service-consumer-dubbo
/# eureka url
eureka.client.serviceUrl.defaultZone=http://192.168.66.40:8761/eureka
eureka.instance.prefer-ip-address=true
/# interface version
wechat.pz.inter.version=v1.0
/# dubbo
spring.dubbo.application.name=wechat_pz_service_consumer_dubbo
spring.dubbo.registry.address=zookeeper://127.0.0.1:2181
spring.dubbo.scan=com.hispeed.wechat.pz.service
</code></pre><p>spring.dubbo.scan扫描本消费者工程中引用了远程服务的包。</p>
<h2 id="服务注册中心的搭建"><a href="#服务注册中心的搭建" class="headerlink" title="服务注册中心的搭建"></a>服务注册中心的搭建</h2><p>服务注册中心使用zookeeper，这也是官方推荐的注册中心组件，还可以使用redis，不过生产环境还是zookeeper更可靠。<br>本文使用的是zookeeper-3.4.9，下载一份并解压，进入zookeeper-3.4.9\conf下，重命名zoo_sample.cfg为zoo.cfg，打开进行编辑。</p>
<p>核心配置项如下：</p>
<pre><code>tickTime=2000
initLimit=10
syncLimit=5
dataDir=d:/data/zookeeper
clientPort=2181
server.1=127.0.0.1:2888:3888
</code></pre><p>dataDir下的路径需要自己创建，创建之后，在该路径下创建一个无扩展名的文本文件myid，在其中写入写入一个编号，如1。在zk集群部署时生效。</p>
<p>由于本文是测试，只需要启动一台zk即可。<br>在zookeeper-3.4.9\bin启动zkServer.cmd，linux下为zkCli.sh，别忘记授予可执行权限。</p>
<p>更多的zk相关的资料，可以参考阅读《从Paxos到zookeeper分布式一致性原理与实践》</p>
<h2 id="进行测试"><a href="#进行测试" class="headerlink" title="进行测试"></a>进行测试</h2><ol>
<li>启动zookeeper服务端，在zookeeper-3.4.9\bin启动zkServer.cmd，双击运行即可</li>
<li>启动服务提供方，运行wechat-pz-service-provider-dubbo下的启动类com.hispeed.wechat.pz.WeChatServiceDubboProviderBootstrap</li>
<li><p>可以在zk控制台看到如下日志输出</p>
<pre><code>2017-09-14 15:53:40,850 [myid:] - INFO  [ProcessThread(sid:0 cport:2181)::PrepRequestProcessor@649]
- Got user-level KeeperException when processing sessionid:0x15e79be352d000f type:create cxid:0x7 zx
id:0xe3b txntype:-1 reqpath:n/a Error Path:/dubbo/com.hispeed.wechat.pz.service.WeChatPzService/conf
igurators Error:KeeperErrorCode = NodeExists for /dubbo/com.hispeed.wechat.pz.service.WeChatPzServic
e/configurators
</code></pre></li>
</ol>
<p>表明服务已注册到zk</p>
<ol>
<li>启动服务消费方，调用消费方暴露的http接口，通过RPC方式调用服务提供方的服务。<br>REST测试工具中访问接口<br><img src="/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/4.png" alt="服务调用返回结果图"></li>
<li>服务消费方日志<br><img src="/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/5.png" alt="服务消费方日志"></li>
<li>服务提供方日志：<br><img src="/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/6.png" alt="服务提供方日志"></li>
</ol>
<p>可以看到，两个结合在一起完成了一次完整的服务调用，服务消费方只对外暴露接口，对内通过Dubbo框架的RPC方式进行服务调用。而springCloud则是另外的一种方式，每个服务都暴露了Http接口，服务间通过Httpclient方式进行服务的调用。只能说各有千秋吧。</p>
<p>到这里，我们就开发并测试完成基于springboot 的dubbo服务的发布和调用。</p>
<h2 id="附录：dubbo管控台的使用"><a href="#附录：dubbo管控台的使用" class="headerlink" title="附录：dubbo管控台的使用"></a>附录：dubbo管控台的使用</h2><p>Dubbo-admin管控台是官方提供的用于进行服务管理和控制的单独的一个web应用，有两种方式获取</p>
<ol>
<li>直接在网络上下载编译好的二进制war包，但不是最好的方式，可能会由于jdk版本的问题造成启动失败。链接：<a href="http://www.pc0359.cn/downinfo/58773.html" target="_blank" rel="external">http://www.pc0359.cn/downinfo/58773.html</a></li>
<li>更推荐的方式还是下载源码编译安装</li>
<li>从官方github下载最新的源码，我下载的是2.5.3，目前官方更新到了2.5.4，在管控台上功能变化不大。安装方法是一样的。</li>
<li>源码下载地址：<a href="https://github.com/alibaba/dubbo" title="https://github.com/alibaba/dubbo" target="_blank" rel="external">https://github.com/alibaba/dubbo</a></li>
<li>解压源码包，在项目根路径下执行 mvn –clean –DskipTests install 跳过测试并安装</li>
<li><p>等待片刻即可安装成功，jdk版本至少在1.6以上</p>
</li>
<li><p>解压一份儿和jdk版本匹配的tomcat，我用的是tomcat7，jdk版本jdk7，从dubbo-admin\target下获取dubbo-admin-2.8.4.war，放置在tomcat的webapp/ROOT下，删除原有的文件。</p>
</li>
<li><p>启动tomcat，这里可能需要设置server.xml中的端口防止端口冲突</p>
</li>
<li><p>启动完成，在浏览器访问，我的链接是<strong><a href="http://localhost:8088/" target="_blank" rel="external">http://localhost:8088/</a></strong><br>这里会提示输入密码，默认为<strong>root/root</strong><br>登录成功可以看到如下界面<br><img src="/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/7.png" alt="7.png"></p>
</li>
<li>Dubbo-admin提供了基本的服务治理功能，点击服务治理-服务，可以看到我们发布的服务提供者<br><img src="/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/8.png" alt="8.png"><br>点击进入可以对其做一些动态的设置，包括权重、是否启用、对其消费者进行动态设置、路由配置、访问控制、负载均衡等。<br><img src="/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/9.png" alt="9.png"></li>
</ol>
<p>基本提供了一个服务治理的控制台，需要更多的其他功能需要自行扩展。<br>感兴趣可以搭建一套进行测试。</p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ol>
<li>这里还需要注意的一点是，凡是调用过程中涉及到的实体都需要实现Serializable 接口，并生成serialVersionUID。否则dubbo会报remoteException</li>
<li>开发工具中的devtools不要使用，否则会提示java.lang.ClassCastException错误</li>
</ol>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/spring-boot/">spring-boot</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/spring-boot/">spring-boot</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://wuwenliang.net/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/" data-title="SpringBoot整合Dubbo实现RPC+SOA | 朝·闻·道" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2017/11/06/springboot配置文件properties获取pom-xml中的属性/" title="springboot配置文件properties获取pom.xml中的属性">
  <strong>上一篇：</strong><br/>
  <span>
  springboot配置文件properties获取pom.xml中的属性</span>
</a>
</div>


<div class="next">
<a href="/2017/07/13/玩转docker之入门及部署springboot应用/"  title="玩转docker之入门及部署springboot应用">
 <strong>下一篇：</strong><br/> 
 <span>玩转docker之入门及部署springboot应用
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/" data-title="SpringBoot整合Dubbo实现RPC+SOA" data-url="http://wuwenliang.net/2017/09/30/SpringBoot整合Dubbo实现RPC-SOA/"></div>
</section>




</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#工程介绍"><span class="toc-number">1.</span> <span class="toc-text">工程介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#服务提供方wechat-service-consumer-dubbo"><span class="toc-number">1.1.</span> <span class="toc-text">服务提供方wechat-service-consumer-dubbo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Pom-xml"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. Pom.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-服务接口定义，可以单独发布到common包，并由服务提供方和调用方都依赖"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. 服务接口定义，可以单独发布到common包，并由服务提供方和调用方都依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-服务接口实现类，通过-Service注解配置其为dubbo服务"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. 服务接口实现类，通过@Service注解配置其为dubbo服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-配置文件"><span class="toc-number">1.1.4.</span> <span class="toc-text">4. 配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#服务消费方wechat-service-consumer-dubbo"><span class="toc-number">1.2.</span> <span class="toc-text">服务消费方wechat-service-consumer-dubbo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-pom-xml"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. pom.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-服务接口定义，同服务提供方"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 服务接口定义，同服务提供方</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-服务消费方配置"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 服务消费方配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-业务逻辑开发，可以是任意形式，这里用一个controller进行调用，其效果就如同进行本地的服务调用"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. 业务逻辑开发，可以是任意形式，这里用一个controller进行调用，其效果就如同进行本地的服务调用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-服务消费方的配置文件"><span class="toc-number">1.2.5.</span> <span class="toc-text">5. 服务消费方的配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#服务注册中心的搭建"><span class="toc-number">1.3.</span> <span class="toc-text">服务注册中心的搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#进行测试"><span class="toc-number">1.4.</span> <span class="toc-text">进行测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#附录：dubbo管控台的使用"><span class="toc-number">1.5.</span> <span class="toc-text">附录：dubbo管控台的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#注意"><span class="toc-number">1.6.</span> <span class="toc-text">注意</span></a></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Aeron/" title="Aeron">Aeron<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/CouchDB/" title="CouchDB">CouchDB<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/DDD/" title="DDD">DDD<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/Dubbo/" title="Dubbo">Dubbo<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/ELK-Stack/" title="ELK-Stack">ELK-Stack<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/HTTPS/" title="HTTPS">HTTPS<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Hexo/" title="Hexo">Hexo<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/JDK-concurrent/" title="JDK-concurrent">JDK-concurrent<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/JDK源码解析/" title="JDK源码解析">JDK源码解析<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Java/" title="Java">Java<sup>37</sup></a></li>
		  
		
		  
			<li><a href="/categories/KindEditor/" title="KindEditor">KindEditor<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/MIT/" title="MIT">MIT<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Redis/" title="Redis">Redis<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/SSO/" title="SSO">SSO<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Sharding-JDBC/" title="Sharding-JDBC">Sharding-JDBC<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/SpringCloud/" title="SpringCloud">SpringCloud<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Spring扩展点/" title="Spring扩展点">Spring扩展点<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/TCC-Transaction源码解析/" title="TCC-Transaction源码解析">TCC-Transaction源码解析<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Tomcat/" title="Tomcat">Tomcat<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/auth/" title="auth">auth<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/disruptor/" title="disruptor">disruptor<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/docker/" title="docker">docker<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/gRPC/" title="gRPC">gRPC<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/hexo/" title="hexo">hexo<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/kubernates/" title="kubernates">kubernates<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/maven/" title="maven">maven<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/mybatis/" title="mybatis">mybatis<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/mysql/" title="mysql">mysql<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/nginx/" title="nginx">nginx<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/nginx-负载均衡/" title="nginx, 负载均衡">nginx, 负载均衡<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/spring-boot/" title="spring-boot">spring-boot<sup>38</sup></a></li>
		  
		
		  
			<li><a href="/categories/springboot/" title="springboot">springboot<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/web/" title="web">web<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/与你同行/" title="与你同行">与你同行<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/专题-分布式/" title="专题-分布式">专题-分布式<sup>20</sup></a></li>
		  
		
		  
			<li><a href="/categories/从零学Netty/" title="从零学Netty">从零学Netty<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/代理模式-工作总结-入职感受/" title="代理模式,工作总结,入职感受">代理模式,工作总结,入职感受<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/分布式-Dubbo/" title="分布式 Dubbo">分布式 Dubbo<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/单例模式/" title="单例模式">单例模式<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/实战分布式/" title="实战分布式">实战分布式<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/年度总结/" title="年度总结">年度总结<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/数据库/" title="数据库">数据库<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/杂谈/" title="杂谈">杂谈<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/架构/" title="架构">架构<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/汇总盘点推荐/" title="汇总盘点推荐">汇总盘点推荐<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/爬虫/" title="爬虫">爬虫<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/电话面试/" title="电话面试">电话面试<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/研磨Kafka/" title="研磨Kafka">研磨Kafka<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/自己写分布式组件系列/" title="自己写分布式组件系列">自己写分布式组件系列<sup>17</sup></a></li>
		  
		
		  
			<li><a href="/categories/跟我学RocketMQ/" title="跟我学RocketMQ">跟我学RocketMQ<sup>26</sup></a></li>
		  
		
		  
			<li><a href="/categories/跟我学zookeeper/" title="跟我学zookeeper">跟我学zookeeper<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/金融系统/" title="金融系统">金融系统<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/随笔/" title="随笔">随笔<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/音视频/" title="音视频">音视频<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
  <div class="tagcloudlist">
    <p class="asidetitle">标签云</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/Aeron/" style="font-size: 11.82px;">Aeron</a> <a href="/tags/CouchDB/" style="font-size: 10px;">CouchDB</a> <a href="/tags/DDD/" style="font-size: 14.55px;">DDD</a> <a href="/tags/Dubbo/" style="font-size: 12.73px;">Dubbo</a> <a href="/tags/ELK-Stack/" style="font-size: 15.45px;">ELK-Stack</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/JDK-concurrent/" style="font-size: 12.73px;">JDK-concurrent</a> <a href="/tags/JDK源码解析/" style="font-size: 12.73px;">JDK源码解析</a> <a href="/tags/Java/" style="font-size: 19.09px;">Java</a> <a href="/tags/KindEditor/" style="font-size: 10px;">KindEditor</a> <a href="/tags/Linux/" style="font-size: 10.91px;">Linux</a> <a href="/tags/MIT/" style="font-size: 10px;">MIT</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/SSO-单点登录/" style="font-size: 10px;">SSO,单点登录</a> <a href="/tags/Sharding-JDBC/" style="font-size: 12.73px;">Sharding-JDBC</a> <a href="/tags/SpringCloud/" style="font-size: 10px;">SpringCloud</a> <a href="/tags/Spring扩展点/" style="font-size: 10px;">Spring扩展点</a> <a href="/tags/TCC-Transaction源码解析/" style="font-size: 10.91px;">TCC-Transaction源码解析</a> <a href="/tags/Tomcat/" style="font-size: 10.91px;">Tomcat</a> <a href="/tags/auth/" style="font-size: 10.91px;">auth</a> <a href="/tags/disruptor/" style="font-size: 14.55px;">disruptor</a> <a href="/tags/docker/" style="font-size: 11.82px;">docker</a> <a href="/tags/gRPC/" style="font-size: 11.82px;">gRPC</a> <a href="/tags/hexo/" style="font-size: 10.91px;">hexo</a> <a href="/tags/kubernates/" style="font-size: 10px;">kubernates</a> <a href="/tags/maven/" style="font-size: 11.82px;">maven</a> <a href="/tags/mybatis/" style="font-size: 10.91px;">mybatis</a> <a href="/tags/mysql/" style="font-size: 13.64px;">mysql</a> <a href="/tags/nginx/" style="font-size: 10.91px;">nginx</a> <a href="/tags/spring-boot/" style="font-size: 20px;">spring-boot</a> <a href="/tags/springboot/" style="font-size: 10px;">springboot</a> <a href="/tags/web/" style="font-size: 12.73px;">web</a> <a href="/tags/与你同行/" style="font-size: 10px;">与你同行</a> <a href="/tags/专题-分布式/" style="font-size: 17.27px;">专题-分布式</a> <a href="/tags/从零学Netty/" style="font-size: 10.91px;">从零学Netty</a> <a href="/tags/代理模式-工作总结-入职感受/" style="font-size: 10px;">代理模式,工作总结,入职感受</a> <a href="/tags/分布式-Dubbo/" style="font-size: 12.73px;">分布式 Dubbo</a> <a href="/tags/单例模式-懒加载/" style="font-size: 10px;">单例模式, 懒加载</a> <a href="/tags/实战分布式/" style="font-size: 11.82px;">实战分布式</a> <a href="/tags/年度总结/" style="font-size: 14.55px;">年度总结</a> <a href="/tags/我们的爱情/" style="font-size: 10px;">我们的爱情</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/杂谈/" style="font-size: 10px;">杂谈</a> <a href="/tags/汇总盘点推荐/" style="font-size: 10px;">汇总盘点推荐</a> <a href="/tags/爬虫-WebMagic/" style="font-size: 10px;">爬虫,WebMagic</a> <a href="/tags/电话面试/" style="font-size: 10px;">电话面试</a> <a href="/tags/研磨Kafka/" style="font-size: 14.55px;">研磨Kafka</a> <a href="/tags/秒杀/" style="font-size: 10px;">秒杀</a> <a href="/tags/自己写分布式组件系列/" style="font-size: 16.36px;">自己写分布式组件系列</a> <a href="/tags/跟我学RocketMQ/" style="font-size: 18.18px;">跟我学RocketMQ</a> <a href="/tags/跟我学zookeeper/" style="font-size: 10px;">跟我学zookeeper</a> <a href="/tags/金融系统/" style="font-size: 11.82px;">金融系统</a> <a href="/tags/随笔/" style="font-size: 15.45px;">随笔</a> <a href="/tags/音视频/" style="font-size: 10px;">音视频</a>
    </div>
  </div>


  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="TaXueWWL" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/spring-boot/" title="spring-boot">spring-boot<sup>38</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>37</sup></a></li>
			
		
			
				<li><a href="/tags/跟我学RocketMQ/" title="跟我学RocketMQ">跟我学RocketMQ<sup>26</sup></a></li>
			
		
			
				<li><a href="/tags/专题-分布式/" title="专题-分布式">专题-分布式<sup>20</sup></a></li>
			
		
			
				<li><a href="/tags/自己写分布式组件系列/" title="自己写分布式组件系列">自己写分布式组件系列<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/ELK-Stack/" title="ELK-Stack">ELK-Stack<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/随笔/" title="随笔">随笔<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/DDD/" title="DDD">DDD<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/disruptor/" title="disruptor">disruptor<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/年度总结/" title="年度总结">年度总结<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/研磨Kafka/" title="研磨Kafka">研磨Kafka<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/mysql/" title="mysql">mysql<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/Dubbo/" title="Dubbo">Dubbo<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/web/" title="web">web<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/JDK源码解析/" title="JDK源码解析">JDK源码解析<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/JDK-concurrent/" title="JDK-concurrent">JDK-concurrent<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/分布式-Dubbo/" title="分布式 Dubbo">分布式 Dubbo<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Sharding-JDBC/" title="Sharding-JDBC">Sharding-JDBC<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Aeron/" title="Aeron">Aeron<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/gRPC/" title="gRPC">gRPC<sup>3</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="undefined" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=null&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p>  <br/>
			惟精惟一，允执厥中 朝闻道，夕死可矣</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/TaXueWWL" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		<a href="http://www.zhihu.com/people/TaXueWWL" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
		<a href="mailto:wuwenliangsn@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2022 
		
		<a href="/about" target="_blank" title="SnoWalker">SnoWalker</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"snowalker"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>

<a href="https://github.com/TaXueWWL" target="_blank"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_white_ffffff.png" alt="Fork me on GitHub"></a>